p8105_hw2_rl3411
================
rl3411
2023-10-03

``` r
library(tidyverse)
library(readxl)
```

# Problem 1

Let’s first load and clean the `pols-month.csv` dataset.

``` r
pols_df <- 
  read_csv("data/pols-month.csv") |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.integer(year),
    president = case_when(
      (prez_gop == 1 | prez_gop == 2) ~ "gop",
      (prez_dem == 1) ~ "dem"
    ) 
  ) |> 
  select(-c(prez_gop, prez_dem, day))
```

Now, let’s load and clean the `snp.csv` dataset.

``` r
snp_df <- 
  read_csv("data/snp.csv") |> 
  separate(date, into = c("month", "day", "year"), sep = "/") |> 
  select(year, month, close) |> 
  mutate(
    month = month.name[as.numeric(month)],
    year = case_when(
      year < 23 ~ as.integer(paste0("20", year)),
      year > 23 ~ as.integer(paste0("19", year))
      )
    )
```

We now clean `unemployment.csv`.

``` r
uepm_df <- 
  read_csv("data/unemployment.csv") |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    month = month.name[match(month,month.abb)]
    ) |> 
  rename(year = Year)
```

Merging datasets together.

``` r
combined_df <- 
  left_join(pols_df, snp_df, by = join_by("year", "month")) |> 
  left_join(uepm_df, by = join_by("year", "month"))
```

Description:

The `pols_df` dataset contains 822 observations (i.e. rows) and 9
variables (i.e. columns). It shows the number of republican and
democratic governors, senators and representatives, as well as whether
the president was republican or democratic from January 1947 to June
2015.

The `snp_df` dataset contains 787 observations (i.e. rows) and 3
variables (i.e. columns). It shows the Standard and Poor’s stock market
index closing values from January 1950 to July 2015. As we are joining
`snp_df` *into* `pols_df`, we take the dimension of `pols_df` and hence
miss out the S&P closing price on July 2015.

The `uepm_df` dataset contains from January 1948 to June 2015

Write a short paragraph about these datasets. Explain briefly what each
dataset contained, and describe the resulting dataset (e.g. give the
dimension, range of years, and names of key variables).

# Problem 2

``` r
mr_tw <- 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel",
             range = "B2:N586") |> 
  janitor::clean_names() |> 
  separate(date, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    month = month.name[as.numeric(month)],
    homes_powered = weight_tons * 500/30,
    dumpster = "Mr. Trash Wheel"
    ) 

prof_tw <- 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel",
             range = "B2:M108") |> 
  janitor::clean_names() |> 
  separate(date, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    month = month.name[as.numeric(month)],
    homes_powered = weight_tons * 500/30,
    dumpster = "Professor Trash Wheel"
    ) 

gwynnda_tw <- 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynnda Trash Wheel",
             range = "B2:L157") |> 
  janitor::clean_names() |> 
  separate(date, into = c("year", "month", "day"), sep = "-") |>
  mutate(
    month = month.name[as.numeric(month)],
    homes_powered = weight_tons * 500/30,
    dumpster = "Gwynnda Trash Wheel"
  ) 

# Combine data
dumpster_df <- 
  bind_rows(mr_tw, prof_tw) |> 
  bind_rows(gwynnda_tw)

head(dumpster_df)
```

    ## # A tibble: 6 × 14
    ##   year  month day   weight_tons volume_cubic_yards plastic_bottles polystyrene
    ##   <chr> <chr> <chr>       <dbl>              <dbl>           <dbl>       <dbl>
    ## 1 2014  May   16           4.31                 18            1450        1820
    ## 2 2014  May   16           2.74                 13            1120        1030
    ## 3 2014  May   16           3.45                 15            2450        3100
    ## 4 2014  May   17           3.1                  15            2380        2730
    ## 5 2014  May   17           4.06                 18             980         870
    ## 6 2014  May   20           2.71                 13            1430        2140
    ## # ℹ 7 more variables: cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   plastic_bags <dbl>, wrappers <dbl>, sports_balls <dbl>,
    ## #   homes_powered <dbl>, dumpster <chr>

homes_powered
